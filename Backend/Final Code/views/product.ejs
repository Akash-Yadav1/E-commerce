<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= product.name %> - GlobalMart USA</title>
  <link rel="stylesheet" href="/cat-style.css">
  <style>
    /* Keep all your current product page styles as is */
    .product-page {
      display: grid;
      grid-template-columns: 1.2fr 2fr 1fr;
      gap: 2rem;
      background: var(--darkreader-bg--bg-2);
      border-radius: 10px;
      padding: 2rem;
      margin: 2rem auto;
      max-width: 1300px;
      box-shadow: 0 4px 18px rgba(0, 0, 0, 0.1);
    }
    .product-gallery img {
      width: 100%;
      max-width: 400px;
      border-radius: 10px;
      border: 1px solid #ddd;
      transition: transform .3s;
      cursor: zoom-in;
    }
    .product-gallery img:hover { transform: scale(1.07); }
    .product-details h1 { font-size: 2rem; margin-bottom: 0.5rem; }
    .brand { color: #007185; font-weight: bold; }
    .rating { color: #f3a847; margin: 0.5rem 0; font-size: 1.1rem; }
    .price { font-size: 1.8rem; font-weight: bold; color: #B12704; margin: 0.6rem 0; }
    .old-price { text-decoration: line-through; margin-left: 10px; color: #555; }
    .prime { background: var(--darkreader-bg--bg-2); color: #e40d0d; padding: 3px 8px; border-radius: 4px; font-size: 0.85rem; }
    .buy-box {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 1.5rem;
      background: var(--darkreader-bg--bg-2);
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
    }
    .add-btn { width: 100%; padding: 12px; border: none; border-radius: 6px; margin-top: 10px; font-weight: bold; cursor: pointer; transition: 0.2s; }
    .btn-cart { background: #FFD814; }
    .btn-cart:hover { background: #F7CA00; }
    .btn-buy { background: #FFA41C; }
    .btn-buy:hover { background: #FA8900; }
    .suggestions { max-width: 1300px; margin: 2rem auto; }
    .suggestions h3 { margin-bottom: 1rem; font-size: 1.3rem; }
    .suggest-grid { display: flex; gap: 1rem; overflow-x: auto; padding-bottom: 1rem; scroll-behavior: smooth; }
    .suggest-card {
      min-width: 200px;
      flex: 0 0 auto;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 1rem;
      background: var(--darkreader-bg--bg-2);
      text-align: center;
      transition: transform .2s;
    }
    .suggest-card:hover { transform: translateY(-5px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    .suggest-card img { width: 150px; height: 150px; object-fit: contain; margin-bottom: 0.5rem; }
    .suggest-card .name { font-size: 0.95rem; font-weight: 600; margin-bottom: 0.3rem; }
    .suggest-card .price { color: #B12704; font-weight: bold; }
    @media(max-width:1000px){ .product-page { grid-template-columns: 1fr; } }
    


    /* Make cart drawer appear above header */

  </style>
</head>

<body>
  <!-- Navbar & Cart Drawer -->
  <%- include('partials/navbar') %>

  <!-- Product Main -->
  <div class="product-page">
    <div class="product-gallery">
      <img id="mainImg" src="<%= product.img %>" alt="<%= product.name %>">
    </div>

    <div class="product-details">
      <h1><%= product.name %></h1>
      <p class="brand">Brand: <%= product.brand %></p>
      <div class="rating">
        <% for(let i=0;i<5;i++){ %>
          <% if(i<product.rating){ %> ★ <% } else { %> ☆ <% } %>
        <% } %>
        <span>(<%= product.reviewsCount %> reviews)</span>
      </div>
     <p class="price" data-price="<%= product.price %>">$<%= product.price %></p>
<% if(product.oldPrice){ %>
  <span class="old-price" data-old="<%= product.oldPrice %>">$<%= product.oldPrice %></span>
<% } %>

      <% if(product.prime){ %><span class="prime">Prime Eligible</span><% } %>

      <h3>Description</h3>
      <p>The <%= product.name %> delivers performance, quality, and reliability for modern needs.</p>
      <ul>
        <li>✔ Premium quality build</li>
        <li>✔ Optimized performance</li>
        <li>✔ Backed by warranty</li>
      </ul>

      <h3>Technical Details</h3>
      <table>
        <tr><td>Brand</td><td><%= product.brand %></td></tr>
        <tr><td>Category</td><td><%= product.category %></td></tr>
        <tr><td>Rating</td><td><%= product.rating %>/5</td></tr>
        <tr><td>Prime</td><td><%= product.prime ? "Yes" : "No" %></td></tr>
      </table>
    </div>

    <div class="buy-box">
           <p class="price" data-price="<%= product.price %>">$<%= product.price %></p>
      <button class="add-btn btn-cart" data-add="<%= product._id %>">Add to Cart</button>
      <p class="delivery">FREE delivery Tomorrow</p>
      <p style="font-size:0.85rem; color:#565959;">Ships from GlobalMart Warehouse</p>
    </div>
  </div>

  <!-- Suggestions -->
  <div class="suggestions">
    <h3>You might also like</h3>
    <div class="suggest-grid">
      <% if (related && related.length> 0) { %>
        <% related.forEach(r=> { %>
          <div class="suggest-card">
            <a href="/product/<%= r.slug %>">
              <img src="<%= r.img %>" alt="<%= r.name %>">
            </a>
            <div class="name"><a href="/product/<%= r.slug %>"><%= r.name %></a></div>
            <div class="price">$<%= r.price %></div>
          </div>
        <% }) %>
      <% } else { %>
        <p>No related products found.</p>
      <% } %>
    </div>
  </div>

  <!-- Footer -->
  <footer style="text-align:center; padding:1rem;">
    <p>© <%= new Date().getFullYear() %> GlobalMart. All rights reserved.</p>
  </footer>

  <!-- Include your main script which handles the cart -->
  <script src="/cat-script.js"></script>

</body>
</html>
